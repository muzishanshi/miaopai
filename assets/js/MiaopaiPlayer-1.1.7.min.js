(function(l) {
    var a = l.sdk_url,
    b = l.name,
    j = window,
    f = document,
    k = "script",
    h = null,
    g = null;
    j["sensorsDataAnalytic201505"] = b;
    j[b] = j[b] ||
    function(d) {
        return function() { (j[b]._q = j[b]._q || []).push([d, arguments])
        }
    };
    var c = ["track", "quick", "register", "registerPage", "registerOnce", "registerSession", "registerSessionOnce", "trackSignup", "trackAbtest", "setProfile", "setOnceProfile", "appendProfile", "incrementProfile", "deleteProfile", "unsetProfile", "identify"];
    for (var e = 0; e < c.length; e++) {
        j[b][c[e]] = j[b].call(null, c[e])
    }
    if (!j[b]._t) {
        h = f.createElement(k),
        g = f.getElementsByTagName(k)[0];
        h.async = 1;
        h.src = a;
        g.parentNode.insertBefore(h, g);
        j[b]._t = 1 * new Date();
        j[b].para = l
    }
})({
    sdk_url: "//wscdn.miaopai.com/static20131031/miaopai20140729/video-static/static/js/sensorsdata.min.js",
    name: "sa",
    show_log: false,
    server_url: window.location.protocol === "https" ? "https://sdlog.miaopai.com:443/sa": "http://sdlog.miaopai.com:8106/sa"
});
sa.quick("autoTrack");
Date.prototype.Format = function(a) {
    var c = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
    };
    if (/(y+)/.test(a)) {
        a = a.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length))
    }
    for (var b in c) {
        if (new RegExp("(" + b + ")").test(a)) {
            a = a.replace(RegExp.$1, (RegExp.$1.length == 1) ? (c[b]) : (("00" + c[b]).substr(("" + c[b]).length)))
        }
    }
    return a
};
var RndNum = function(c) {
    var b = "";
    for (var a = 0; a < c; a++) {
        b += Math.floor(Math.random() * 10)
    }
    return b
};
var DateRnd = function() {
    var a = new Date().getTime(),
    b = RndNum(3);
    return a + "" + b
};
var SystemJudge = function() {
    var b = navigator.userAgent;
    var e = b.indexOf("Android") > -1 || b.indexOf("Adr") > -1;
    var d = !!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
    var a = (navigator.platform == "Win32") || (navigator.platform == "Windows");
    var c = (navigator.platform == "Mac68K") || (navigator.platform == "MacPPC") || (navigator.platform == "Macintosh") || (navigator.platform == "MacIntel");
    if (e) {
        return "1"
    } else {
        if (d) {
            return "2"
        } else {
            if (a) {
                return "3"
            } else {
                if (c) {
                    return "4"
                } else {
                    return "0"
                }
            }
        }
    }
};
var ToJsonObj = function() {
    var e = {};
    var d = document.cookie;
    var b = d.split("; ");
    for (var c = 0,
    a = b.length; c < a; c++) {
        e[b[c].split("=")[0]] = b[c].split("=")[1]
    }
    return e
};
var customEvent;
var videoObjDefault;
var Event = function() {
    var c = this;
    var b, a, d;
    d = {};
    b = function(g, f) {
        var e, h;
        e = (h = d[g]) != null ? h: d[g] = [];
        return e.push(f)
    };
    a = function() {
        var e, j, i, f, g, h;
        g = Array.prototype.shift.call(arguments);
        e = (j = d[g]) != null ? j: d[g] = [];
        for (i = 0, f = e.length; i < f; i++) {
            h = e[i];
            if (h.apply(c, arguments) === false) {
                return false
            }
        }
    };
    return {
        listen: b,
        trigger: a
    }
};
customEvent = new Event();
var MPlayer = function() {
    var a = navigator.userAgent.toLowerCase();
    this.vvid_flag = DateRnd();
    this.sa_timer = null;
    this.hackChrome = a.match(/chrome/i) == "chrome" ? (parseInt(a.split("chrome/")[1].split(" ")[0]) <= 51) : false;
    this.start = function() {};
    this.init = function(b) {
        videoObjDefault = {
            "domain": b["domain"] || "//wscdn.miaopai.com/static20131031/miaopai20140729/video-static/",
            "parent": b["parent"],
            "width": b["width"] || "100%",
            "height": b["height"] || "100%",
            "scale": b["scale"] || "auto",
            "autoplay": b["autoplay"],
            "scid": b["scid"],
            "videoSrc": b["videoSrc"] || "//gslb.miaopai.com/stream/" + b["scid"] + ".mp4",
            "flashSrc": "//wscdn.miaopai.com/splayer2.2.2.swf?scid=" + b["scid"] + "&amp;token=&amp;autopause=" + (!b["autoplay"] || false) + "&amp;fromweibo=false",
            "title": b["title"] || "",
            "poster": b["poster"] || ""
        };
        this.innerhtml();
        if (! (document.createElement("video").canPlayType) || !document.querySelectorAll || this.hackChrome) {
            var d;
            d = videoObjDefault["parent"].getElementsByTagName("div");
            for (var c = 0; c < d.length; c++) {
                if (d[c].className.indexOf("controls-wrap") >= 0) {
                    d[c].style.display = "none"
                }
            }
            return this
        }
        if (navigator.userAgent.indexOf("MSIE") >= 0) {
            var e;
            e = videoObjDefault["parent"].getElementsByTagName("div");
            for (var c = 0; c < e.length; c++) {
                if (e[c].className.indexOf("fullscreen") >= 0) {
                    e[c].style.backgroundImage = "url(" + videoObjDefault["domain"] + "static/img/full_disabled.png)";
                    e[c].style.cursor = "not-allowed"
                }
            }
        }
        this.playerCon(videoObjDefault);
        if (videoObjDefault.autoplay === true) {
            this.start()
        }
        return this
    };
    this.innerhtml = function() {
        var d = encodeURIComponent("我从@秒拍 分享了一个视频-" + videoObjDefault["title"] + "(分享自 @秒拍）");
        var c = encodeURIComponent(window.location.href);
        var e = "";
        var b = "";
        if (this.hackChrome) {
            b = '<object width="100%" height="100%" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">' + '<param name="src" value="' + videoObjDefault["flashSrc"] + '">' + '<param name="wmode" value="transparent">' + '<param name="wmode" value="opaque">' + '<param name="quality" value="high"> ' + '<param name="allowfullscreen" value="true">' + '<param name="allowscriptaccess" value="always">' + '<embed src="' + videoObjDefault["flashSrc"] + '" type="application/x-shockwave-flash" autostart="false" width="100%" height="100%" quality="high" allowfullscreen="true" wmode="transparent" allowscriptaccess="always" pluginspage="//www.macromedia.com/go/getflashplayer">' + "</object>"
        } else {
            b = '<video class="video" style="width:100%;height:100%;opacity: 1; z-index: 2;" webkit-playsinline="true"  src="' + videoObjDefault["videoSrc"] + '"  poster="' + videoObjDefault["poster"] + '" preload="preload">' + '<object width="100%" height="100%" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">' + '<param name="src" value="' + videoObjDefault["flashSrc"] + '">' + '<param name="wmode" value="transparent">' + '<param name="wmode" value="opaque">' + '<param name="quality" value="high"> ' + '<param name="allowfullscreen" value="true">' + '<param name="allowscriptaccess" value="always">' + '<embed src="' + videoObjDefault["flashSrc"] + '" type="application/x-shockwave-flash" autostart="false" width="100%" height="100%" quality="high" allowfullscreen="true" wmode="transparent" allowscriptaccess="always" pluginspage="//www.macromedia.com/go/getflashplayer">' + "</object>" + "</video> "
        }
        e += '<div class="video-player" style="width:' + videoObjDefault["width"] + ";height:" + videoObjDefault["height"] + ';overflow:hidden">' + b + '<!-- "controls-wrap"该元素有且只有一个class名 -->' + '<div class="controls-wrap">' + '<b class="loading">' + '<b class="loading-logo"></b>' + "</b>" + '<b class="play-cover"></b>' + '<div class="controls" >' + '<div class="time">' + '<b class="remaining">00:00</b>/<b class="total">00:00</b>' + "</div>" + '<div class="progress-bar">' + '<div class="progress-preload" style="width:0%""></div>' + '<div class="progress-play" style="width:0%;"></div>' + '<div class="progress-handler" style="left:0%"><b></b></div>' + "</div>" + '<div class="controls-bar">' + '<button class="play"></button>' + '<div class="logo">' + '<a href="//www.miaopai.com/" class="down">' + '<img src="' + videoObjDefault["domain"] + 'static/img/logo.png" class="logo-img" alt="logo">' + "<b>下载秒拍，免流量看热门短视频。</b>" + '<img src="' + videoObjDefault["domain"] + 'static/img/down.png" alt="down button" class="down">' + "</a>" + "</div>" + '<div class="volume">' + '<div class="volume-wrap">' + '<b class="v-rise"></b>' + '<div class="volume-level-bar">' + '<div class="volume-level" style="height:100%""></div>' + '<div class="volume-handler" style="bottom:100%"><b></b></div>' + "</div>" + '<b class="v-reduce"></b>' + "</div>" + '<div class="volume-icon"></div>' + "</div>" + '<div class="fullscreen"></div>' + "</div>" + "</div>" + '<div class="recommend">' + ' <div class="hot">' + '<div class="main">' + "<h2>【今日热门视频】</h2>" + '<div class="recommend_video clearfix">' + "</div>" + '<div class="share">' + '<div class="share_btn"><img src="' + videoObjDefault["domain"] + 'static/img/share.png" alt=""><b>分享</b></div>' + '<div class="replay_btn"><img src="' + videoObjDefault["domain"] + 'static/img/replay.png" alt=""><b>重播</b></div>' + "</div>" + "</div>" + "</div>" + "</div>" + '<div class="share_icon">' + "<ol>" + '<li><a target="_blank" href="//service.weibo.com/share/share.php?appkey=2637646381&url=' + c + "&title=" + d + '&sourceUrl=http%3A%2F%2Fwww.miaopai.com&content=utf8&searchPic=false"><img src="' + videoObjDefault["domain"] + 'static/img/share_sina.png" alt=""><b>新浪微博</b></a></li>' + '<li><a target="_blank" href="//www.jiathis.com/send/?webid=tqq&url=' + c + "&title=" + d + '&appkey=d815c200286a07961d81465d11a30a46"><img src="' + videoObjDefault["domain"] + 'static/img/share_tencent.png" alt=""><b>腾讯微博</b></a></li>' + '<li><a target="_blank" href="//www.jiathis.com/send/?webid=weixin&url=' + c + "&title=" + d + '"><img src="' + videoObjDefault["domain"] + 'static/img/share_weChat.png" alt=""><b>微信</b></a></li>' + '<li><a target="_blank" href="//www.jiathis.com/send/?webid=weixin&url=' + c + "&title=" + d + '"><img src="' + videoObjDefault["domain"] + 'static/img/share_pyq.png" alt=""><b>微信朋友圈</b></a></li>' + '<li><a target="_blank" href="//www.jiathis.com/send/?webid=renren&url=' + c + "&title=" + d + '"><img src="' + videoObjDefault["domain"] + 'static/img/share_renren.png" alt=""><b>人人</b></a></li>' + "</ol>" + "</div>" + "</div>" + "</div>";
        videoObjDefault["parent"].innerHTML = e
    }
};
MPlayer.prototype.playerCon = function(b) {
    var c = this;
    var a = 0;
    this.getRecommendVideo = function() {
        if (a == 0) {
            getJson();
            customEvent.listen("padding",
            function(d) {
                c.recommend_video.innerHTML = d
            });
            a++
        }
    };
    this.getEle = function(d) {
        return (b["parent"] || document).querySelectorAll(d)[0]
    };
    this.VIDEOPLAYER = c.getEle(".video-player");
    this.controlsWarp = c.getEle(".controls-wrap");
    this.progress = c.getEle(".progress-bar");
    this.progressPreload = c.getEle(".progress-preload");
    this.progressPlay = c.getEle(".progress-play");
    this.progressHandler = c.getEle(".progress-handler");
    this.controls = c.getEle(".controls-bar");
    this.controlsSwitch = c.getEle(".controls");
    this.video = c.getEle(".video");
    this.loadImg = c.getEle(".loading");
    this.playCover = c.getEle(".play-cover");
    this.volume = c.getEle(".volume");
    this.volumeBar = c.getEle(".volume-level-bar");
    this.volumeWrap = c.getEle(".volume-wrap");
    this.volumeIcon = c.getEle(".volume-icon");
    this.volumeLevel = c.getEle(".volume-level");
    this.volumeHandler = c.getEle(".volume-handler");
    this.play = c.getEle(".play");
    this.timeRemaining = c.getEle(".remaining");
    this.timeTotal = c.getEle(".total");
    this.fullscreen = c.getEle(".fullscreen");
    this.recommend = c.getEle(".recommend");
    this.share_btn = c.getEle(".share_btn");
    this.replay_btn = c.getEle(".replay_btn");
    this.share_icon = c.getEle(".share_icon");
    this.recommend_video = c.getEle(".recommend_video");
    this.loading_logo = c.getEle(".loading-logo");
    this.dragProgressStatus = false;
    this.dragVolumeStatus = false;
    this.timer;
    this.timerControls;
    this.ismouse = 0;
    this.oriVolume = c.video.volume;
    this._reset = function() {
        var d;
        c.VIDEOPLAYER.style.width = b["width"] || "100%";
        if (b["scale"] && b["scale"] == 1) {
            c.VIDEOPLAYER.style.height = c.VIDEOPLAYER.offsetWidth + "px"
        } else {
            if (b["height"] && b["height"] != "100%") {
                d = b["height"];
                c.video.style.height = d;
                c.VIDEOPLAYER.style.height = d
            } else {
                d = c.video.videoHeight / c.video.videoWidth * c.VIDEOPLAYER.offsetWidth + "px";
                c.video.style.height = d;
                c.VIDEOPLAYER.style.height = d
            }
        }
        c.playerWidth = b["width"] || c.VIDEOPLAYER.style.width;
        c.playerHeight = b["height"] || c.VIDEOPLAYER.style.height;
        c.videoWidth = c.video.style.width;
        c.videoHeight = c.video.style.height;
        var e = c.video.duration;
        c.timeTotal.innerHTML = c.TimeTranslate(e) ? c.TimeTranslate(e) : "00:00";
        c.changeProgress()
    };
    this.Playing = function() {
        clearInterval(c.sa_timer);
        c.sa_timer = setInterval(function() {
            var d = new Date().Format("yyyy-MM-dd hh:mm:ss.S");
            sa.track("mp_vv", {
                vvid: c.vvid_flag,
                is_first_heartbeat: false,
                heartbeat_time: d
            })
        },
        5000);
        c.loadImg.style["display"] = "none";
        c.recommend.className = "recommend"
    };
    this.Play = function() {
        var d = new Date().Format("yyyy-MM-dd hh:mm:ss.S");
        sa.track("mp_vv", {
            log_version: 2,
            log_record_time: d,
            token: !!(ToJsonObj().token) ? ToJsonObj().token: "",
            cookie_id: !!(ToJsonObj().cookie_id) ? ToJsonObj().cookie_id: "",
            product_id: "1",
            platform_id: "4",
            os: SystemJudge(),
            vvid: c.vvid_flag,
            svid: b["scid"],
            is_first_heartbeat: true,
            heartbeat_time: d
        });
        c.progressBarStartTimer();
        c.setTimerControls();
        c.playCoverHide()
    };
    this.Pause = function() {
        clearInterval(c.sa_timer);
        c.playCoverShow();
        c.progressBarClearTimer()
    };
    this.ended = function() {
        clearInterval(c.sa_timer);
        c.video.pause();
        c.progressBarClearTimer(c.video.currentTime);
        c.clearTimerControls();
        c.recommend.className = "recommend show";
        c.getRecommendVideo()
    };
    this.Error = function() {
        c.loading_logo["style"]["backgroundImage"] = "url(" + b["domain"] + "static/img/error.png)"
    };
    this.PlayOrPause = function() {
        if (c.video.paused) {
            c.video.play()
        } else {
            c.video.pause()
        }
    };
    this.playCoverShow = function() {
        c.playCover.className = "play-cover show";
        c.play.className = "play"
    };
    this.playCoverHide = function() {
        c.playCover.className = "play-cover";
        c.play.className = "play pause"
    };
    this.LoadDone = function() {
        c.loadImg.style["display"] = "none";
        c._reset()
    };
    this.start = function() {
        c.loadImg.style.display = "block";
        var d = setInterval(function() {
            if (c.video.readyState == 4) {
                clearInterval(d);
                c.video.play();
                c.loadImg.style.display = "none"
            }
        },
        500)
    };
    this.volumeShow = function(d) {
        if (d && d.stopPropagation) {
            d.stopPropagation()
        } else {
            window.event.cancelBubble = true
        }
        c.volumeWrap.className = "volume-wrap show"
    };
    this.volumeHide = function(d) {
        if (d && d.stopPropagation) {
            d.stopPropagation()
        } else {
            window.event.cancelBubble = true
        }
        c.volumeWrap.className = "volume-wrap"
    };
    this.volumeMute = function() {
        c.volumeIcon.className = "volume-icon volume-close";
        c.video.muted = true;
        c.volumeLevel.style.height = 0;
        c.volumeHandler.style.bottom = 0
    };
    this.volumeResumed = function() {
        c.volumeIcon.className = "volume-icon";
        c.video.muted = false;
        c.volumeLevel.style.height = parseFloat(c.oriVolume) * 100 + "%";
        c.volumeHandler.style.bottom = parseFloat(c.oriVolume) * 100 + "%"
    };
    this.volumeControls = function(e) {
        var d = parseFloat(e) * 100 + "%";
        c.volumeLevel.style.height = d;
        c.volumeHandler.style.bottom = d;
        c.video.volume = parseFloat(e)
    };
    this.volumeSwitch = function(d) {
        window.event ? window.event.cancelBubble = true: d.stopPropagation();
        if (c.volumeIcon.className == "volume-icon") {
            c.volumeMute()
        } else {
            c.volumeResumed()
        }
    };
    this.getEnd = function() {
        var d = 0;
        try {
            d = c.video.buffered.end(0) || 0
        } catch(f) {}
        return d
    };
    this.TimeTranslate = function(i) {
        var e = "",
        g, d, f;
        switch (true) {
        case(i >= 3600) : g = parseInt(i / 3600);
            d = parseInt((i - g * 3600) / 60) >= 10 ? parseInt((i - g * 3600) / 60) : "0" + parseInt((i - g * 3600) / 60);
            f = parseInt(i % 60) >= 10 ? parseInt(i % 60) : "0" + parseInt(i % 60);
            e = g + ":" + d + ":" + f;
            return e;
            break;
        case (i >= 60 || i < 3600) : d = parseInt(i / 60) >= 10 ? parseInt(i / 60) : "0" + parseInt(i / 60);
            f = parseInt(i % 60) >= 10 ? parseInt(i % 60) : "0" + parseInt(i % 60);
            e = d + ":" + f;
            return e;
            break;
        case (i < 60) : f = parseInt(i % 60) >= 10 ? parseInt(i % 60) : "0" + parseInt(i % 60);
            e = "00:" + f;
            return e;
            break
        }
    };
    this.showCurretTime = function(f) {
        var g = c.video.duration;
        var e = f || c.video.currentTime;
        c.timeTotal.innerHTML = c.TimeTranslate(c.video.duration) ? c.TimeTranslate(c.video.duration) : "00:00";
        var d = Math.floor(Math.floor(e) / Math.floor(c.video.duration) * 100) + "%";
        c.timeRemaining.innerHTML = c.TimeTranslate(e);
        c.progressPlayLoad(d);
        if ((parseInt(d) >= 60) && (a == 0)) {
            c.getRecommendVideo()
        }
    };
    this.progressBarStartTimer = function() {
        c.progressPreloadLoad();
        c.timer = setInterval(function() {
            c.showCurretTime()
        },
        500)
    };
    this.progressBarClearTimer = function(d) {
        c.showCurretTime(d);
        clearInterval(c.timer)
    };
    this.progressPreloadLoad = function() {
        var e, d;
        d = setInterval(function() {
            if (c.getEnd() <= c.video.duration) {
                e = Math.round(c.getEnd() / c.video.duration * 100) + "%";
                c.progressPreload.style.width = e;
                if (c.getEnd() == c.video.duration) {
                    clearInterval(d)
                }
            }
        },
        500)
    };
    this.progressPlayLoad = function(d) {
        c.progressPlay.style.width = d;
        c.progressHandler.style.left = d
    };
    this.focusProgress = function(d) {
        c.controlsSwitch.className = "controls";
        c.progress.className = "progress-bar on"
    };
    this.blurProgress = function() {
        c.progress.className = "progress-bar";
        c.controlsSwitch.className = "controls hidden"
    };
    this.restartTimer = function(d) {
        c.progressBarClearTimer();
        c.progressBarStartTimer()
    };
    this.videoTimeUpdate = function(e) {
        var d = c.video.currentTime;
        c.timeRemaining.innerHTML = c.TimeTranslate(d);
        c.video.currentTime = e + ""
    };
    this.hideControlsFn = function() {
        if (c.ismouse == 0) {
            if (c.video.paused || c.video.ended) {
                clearInterval(c.timerControls)
            } else {
                c.blurProgress()
            }
        }
        c.ismouse = 0
    };
    this.clearTimerControls = function() {
        clearInterval(c.timerControls);
        c.focusProgress()
    };
    this.duringTimerControls = function() {
        c.ismouse = 1;
        c.focusProgress()
    };
    this.setTimerControls = function() {
        clearInterval(c.timerControls);
        c.timerControls = setInterval(c.hideControlsFn, 3000)
    };
    this.changeProgress = function() {
        var d = false;
        var e;
        var h;
        var g;
        var f;
        c.AddEvent(c.progress, "mousedown",
        function(i) {
            i = i || window.event;
            e = (c.VIDEOPLAYER || c.video).getBoundingClientRect().left + (document.body || document.documentElement).scrollLeft;
            h = (c.VIDEOPLAYER || c.video).offsetWidth;
            g = ((i.clientX + (document.body || document.documentElement).scrollLeft)) - e;
            f = (g) / (h);
            c.videoTimeUpdate(f * c.video.duration);
            c.progressPlayLoad(f * 100 + "%");
            d = true
        });
        c.AddEvent(document, "mouseup",
        function(i) {
            d = false
        });
        c.AddEvent(document, "mousemove",
        function(i) {
            e = (c.VIDEOPLAYER || c.video).getBoundingClientRect().left + (document.body || document.documentElement).scrollLeft;
            h = (c.VIDEOPLAYER || c.video).offsetWidth;
            g = ((i.clientX + (document.body || document.documentElement).scrollLeft)) - e;
            f = (g) / (h);
            if (d && f >= 0 && f <= 1) {
                c.videoTimeUpdate(f * c.video.duration);
                c.progressPlayLoad(f * 100 + "%")
            }
        });
        c.AddEvent(b["parent"], "mousemove",
        function(i) {
            c.duringTimerControls()
        })
    };
    this.volumeChange = function(d) {
        c.video.volume = d;
        c.oriVolume = d;
        c.volumeLevel.style.height = d * 100 + "%";
        c.volumeHandler.style.bottom = d * 100 + "%"
    };
    this.changeVolume = function() {
        var e = false;
        var d;
        var g;
        var h;
        var f;
        c.AddEvent(c.volumeWrap, "mousedown",
        function(i) {
            i = i || window.event;
            d = c.volumeBar.getBoundingClientRect().top + c.volumeBar.offsetHeight;
            g = c.volumeBar.offsetHeight;
            h = d - (i.clientY);
            height = h / g;
            c.volumeChange(height);
            e = true
        });
        c.AddEvent(document, "mouseup",
        function(i) {
            e = false
        });
        c.AddEvent(c.volumeWrap, "mousemove",
        function(i) {
            i = i || window.event;
            d = c.volumeBar.getBoundingClientRect().top + c.volumeBar.offsetHeight;
            g = c.volumeBar.offsetHeight;
            h = d - (i.clientY);
            height = h / g;
            if (e && height >= 0 && height <= 1) {
                c.volumeChange(height)
            }
        })
    };
    this.browserPrefix = function(d) {
        switch (true) {
        case( !! (c.VIDEOPLAYER[d])) : return d;
        case( !! (c.VIDEOPLAYER["moz" + d[0].toUpperCase() + d.slice(1)])) : return "moz" + d[0].toUpperCase() + d.slice(1);
        case( !! (c.VIDEOPLAYER["webkit" + d[0].toUpperCase() + d.slice(1)])) : return "webkit" + d[0].toUpperCase() + d.slice(1);
        case( !! (c.VIDEOPLAYER["ms" + d[0].toUpperCase() + d.slice(1)])) : return "ms" + d[0].toUpperCase() + d.slice(1)
        }
    };
    this.fullScreen = function() {
        if ((c.fullscreen.className == "fullscreen")) {
            c.VIDEOPLAYER[c.browserPrefix("requestFullScreen")]();
            return
        }
        switch (true) {
        case( !! document.exitFullscreen) : document.exitFullscreen();
            break;
        case ( !! document.mozCancelFullScreen) : document.mozCancelFullScreen();
            break;
        case ( !! document.webkitCancelFullScreen) : document.webkitCancelFullScreen();
            break;
        case ( !! document.msExitFullscreen) : document.msExitFullscreen();
            break
        }
    };
    this.fullChange = function() {
        if (c.fullscreen.className == "fullscreen") {
            c.fullscreen.className = "fullscreen fullscreen-ori";
            c.VIDEOPLAYER.style.width = "100%";
            c.VIDEOPLAYER.style.height = "100%";
            c.video.style.width = "100%";
            c.video.style.height = "100%"
        } else {
            c.fullscreen.className = "fullscreen";
            c.VIDEOPLAYER.style.width = c.playerWidth;
            c.VIDEOPLAYER.style.height = c.playerHeight;
            c.video.style.width = c.videoWidth;
            c.video.style.height = c.videoHeight
        }
    };
    this.AddEvent = function(f, g, e) {
        if (f.length >= 1 && Object.prototype.toString.call(f) === "[object Array]") {
            for (var d = 0; d < f.length; d++) {
                if (f[d].attachEvent) {
                    f[d].attachEvent("on" + g, e)
                } else {
                    f[d].addEventListener(g, e, false)
                }
            }
        } else {
            if (f.attachEvent) {
                f.attachEvent("on" + g, e)
            } else {
                f.addEventListener(g, e, false)
            }
        }
    };
    this.run = function() {
        c.video.load();
        c.changeVolume();
        c.AddEvent([c.video, c.playCover, c.play], "click", c.PlayOrPause);
        c.AddEvent(c.replay_btn, "click",
        function() {
            c.video.play()
        });
        c.AddEvent(c.share_btn, "click",
        function() {
            c.share_icon.style.display = "block"
        });
        c.AddEvent(c.share_icon, "click",
        function() {
            c.share_icon.style.display = "none"
        });
        c.AddEvent(c.video, "loadedmetadata", c.LoadDone);
        c.AddEvent(c.video, "play", c.Play);
        c.AddEvent(c.video, "playing", c.Playing);
        c.AddEvent(c.video, "ended", c.ended);
        c.AddEvent(c.video, "pause", c.Pause);
        c.AddEvent(c.video, "error", c.Error);
        c.AddEvent(c.volume, "mouseover", c.volumeShow);
        c.AddEvent(c.volume, "mouseout", c.volumeHide);
        c.AddEvent(c.volumeIcon, "click", c.volumeSwitch);
        c.AddEvent(c.fullscreen, "click", c.fullScreen);
        c.AddEvent(document, "webkitfullscreenchange", c.fullChange);
        c.AddEvent(document, "mozfullscreenchange", c.fullChange);
        c.AddEvent(document, "MSFullscreenChange", c.fullChange);
        c.AddEvent(document, "fullscreenChange", c.fullChange)
    };
    this.run()
};
var getJson = function() {
    var b = "//api.miaopai.com/m/getHRevData?scid=" + videoObjDefault["scid"] + "&callback=jsonpCallback&num=3";
    var a = document.createElement("script");
    a.type = "text/javascript";
    a.src = b;
    var c = document.getElementsByTagName("head")[0];
    c.appendChild(a);
    jsonpCallback = function(e) {
        console.log(e);
        for (var d in e) {
            var f = "";
            f = '<div class="left">' + '<b class="pic" style="background-image:url(' + e[0]["src"] + ')"><a target="_blank" href="//www.miaopai.com/show/' + e[0]["svid"] + '.htm"><img src="' + videoObjDefault["domain"] + 'static/img/play_hot.png" alt=""></a></b>' + "<p>" + e[0]["title"] + "</p>" + "</div>" + '<div class="right">' + '<div class="right_r1">' + '<b class="pic" style="background-image:url(' + e[1]["src"] + ')"><a target="_blank" href="//www.miaopai.com/show/' + e[1]["svid"] + '.htm"><img src="' + videoObjDefault["domain"] + 'static/img/play_hot.png" alt=""></a></b>' + "<p>" + e[1]["title"] + "</p>" + "</div>" + '<div class="right_r2">' + '<b class="pic" style="background-image:url(' + e[2]["src"] + ')"><a target="_blank" href="//www.miaopai.com/show/' + e[2]["svid"] + '.htm"><img src="' + videoObjDefault["domain"] + 'static/img/play_hot.png" alt=""></a></b>' + "<p>" + e[2]["title"] + "</p>" + "</div>" + "</div>"
        }
        customEvent.trigger("padding", f)
    }
};
var MiaopaiPlayer = function(a) {
    return new MPlayer().init(a)
};